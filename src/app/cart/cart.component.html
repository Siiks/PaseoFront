<!-- Sección de migas de pan -->
<section class="breadcrumb-option">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb__text">
          <h4>Carrito de compras</h4>
          <div class="breadcrumb__links">
            <a href="./index.html">Inicio</a>
            <a href="./shop.html">Tienda</a>
            <span>Carrito de compras</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Sección de carrito de compras -->
<app-error-message [message]="errorMessage"></app-error-message>
<app-success-message [message]="successMessage"></app-success-message>
<section class="shopping-cart spad">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <div class="shopping__cart__table">
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>Producto</th>
                  <th>Cantidad</th>
                  <th>Total</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of cartItems">
                  <td class="product__cart__item d-flex">
                    <div class="product__cart__item__pic">
                      <img [src]="'data:image/jpeg;base64,' + item.product?.fotos[0]?.image" alt="">
                    </div>
                    <div class="product__cart__item__text">
                      <h6>{{item.product.name}}</h6>
                      <h5>${{item.product.price.toFixed(2)}}</h5>
                    </div>
                  </td>
                  <td class="quantity__item">
                    <div class="quantity">
                      <div class="pro-qty-2">
                        <span class="fa fa-angle-left dec qtybtn" [class.disabled]="item.quantity === 1" (click)="decrementQuantity(item)"></span>
                        <input type="text" [value]="item.quantity">
                        <span class="fa fa-angle-right inc qtybtn" (click)="incrementQuantity(item)"></span>
                      </div>
                    </div>
                  </td>
                  <td class="cart__price">${{(item.product.price * item.quantity).toFixed(2)}}</td>
                  <td class="cart__close"><a (click)="deleteCartItems(item.id)" class="close"><i class="fa fa-close"></i></a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="continue__btn">
              <a href="shop">Continuar comprando</a>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="continue__btn update__btn">
              <a (click)="updateCartItems(cartItems)"><i class="fa fa-spinner"></i> Actualizar carrito</a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="cart__total">
          <h6>Total del carrito</h6>
          <ul>
            <li>Subtotal <span>$ {{subtotal.toFixed(2)}}</span></li>
            <li>Total <span>$ {{subtotal.toFixed(2)}}</span></li>
          </ul>
          <a href="check-out" class="primary-btn" *ngIf="cartItems[0]">Continuar al pago</a>
        </div>
      </div>
    </div>
  </div>
</section>
